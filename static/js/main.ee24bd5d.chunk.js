(this["webpackJsonpchroma-chat-tutorial"]=this["webpackJsonpchroma-chat-tutorial"]||[]).push([[0],{13:function(e,t,a){"use strict";(function(e){var n=a(9),r=a.n(n),o=a(15),i=a(52),s=a.n(i),c=function(){var t;return{init:function(){var a=Object(o.a)(r.a.mark((function a(n){var o,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log(n),o=s.a.restClient.createRestClient(n,"78967baa4768cbcef11c508326ffb13a956689fcb6dc3ba17f4b895cbb1577a3",5),t=s.a.gtxClient.createClient(o,e.from("78967baa4768cbcef11c508326ffb13a956689fcb6dc3ba17f4b895cbb1577a3","hex"),[]),a.next=6,t.query("ping",{});case 6:return i=a.sent,console.log("Postchain client initialized."),a.abrupt("return",i);case 11:a.prev=11,a.t0=a.catch(0),console.error(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}(),getGtx:function(){return t}}}();t.a=c}).call(this,a(10).Buffer)},166:function(e,t,a){e.exports=a(294)},171:function(e,t,a){},188:function(e,t){},190:function(e,t){},224:function(e,t){},225:function(e,t){},283:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),i=a.n(o),s=a(20),c=a(21),l=a(23),u=a(22),m=a(24),d=(a(171),a(34)),p=a(75),g=a(41),f=a(51),y=a(6),h=a(18),b=a(9),v=a.n(b),E=a(15),O=a(295),x=a(296),j=a(297),w=a(298),C=a(299),S=a(300),k=a(310),_=a(301),P=a(302),N=a(303),F=a(304),L=a(12),G=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",privKey:"",loginPrivKey:"",updating:!1},a.register=function(){var e=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.state.username){e.next=3;break}return e.abrupt("return");case 3:return a.setState({updating:!0}),e.next=6,y.a.register(a.state.username);case 6:n=e.sent,Object(L.isEmpty)(n)&&alert("Operation failed! Please try again."),a.setState({privKey:n.privKey,updating:!1});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.login=function(){var e=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.state.loginPrivKey){e.next=3;break}return e.abrupt("return");case 3:return a.setState({updating:!0}),e.next=6,y.a.login(a.state.loginPrivKey);case 6:n=e.sent,Object(L.isEmpty)(n)?(alert("Unable to login! Invalid privKey or user does not exist."),a.setState({updating:!1})):a.props.history.push("/lobby");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onFieldChanged=function(e){return a.setState(Object(h.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){y.a.isLoggedIn()&&this.props.history.push("/lobby")}},{key:"render",value:function(){var e=this.state,t=e.privKey,a=e.username,n=e.updating,o=e.loginPrivKey;return r.a.createElement(O.a,{className:"justify-content-center align-items-center",style:{height:"100vh"}},r.a.createElement(x.a,{className:"m-auto",style:{paddingBottom:"20vh"},sm:"10",md:"6",lg:"5",xl:"4"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null,r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement(F.a,null,"Username:"),r.a.createElement(S.a,{type:"text",readOnly:!0,name:"username",placeholder:"Username...",value:a})),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(F.a,null,"Private Key (Save this to login):"),r.a.createElement(S.a,{type:"textarea",name:"privKey",row:"3",value:t,readOnly:!0}))))),r.a.createElement("div",{className:"d-flex justify-content-center mt-3"},r.a.createElement(_.a,{color:"primary",tag:f.b,to:"/lobby"},"Let's Play!"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"mb-3"},"Welcome!"),r.a.createElement(j.a,{onSubmit:this.login,className:"row"},r.a.createElement(w.a,{className:"col mb-0 flex-grow-1"},r.a.createElement(C.a,null,r.a.createElement(S.a,{type:"password",name:"loginPrivKey",required:!0,placeholder:"Private Key...",value:o,onChange:this.onFieldChanged}),r.a.createElement(k.a,{addonType:"append"},r.a.createElement(_.a,{style:{minWidth:"7em"},className:"btn-block",color:"primary",type:"submit",disabled:n},"Login"))))),r.a.createElement("div",{className:"text-center my-3"},"-- or --"),r.a.createElement(j.a,{onSubmit:this.register,className:"row"},r.a.createElement(w.a,{className:"col mb-0 flex-grow-1"},r.a.createElement(C.a,null,r.a.createElement(S.a,{type:"text",readOnly:t,required:!0,name:"username",placeholder:"Username...",value:a,onChange:this.onFieldChanged}),r.a.createElement(k.a,{addonType:"append"},r.a.createElement(_.a,{style:{minWidth:"7em"},className:"btn-block",color:"primary",type:"submit",disabled:n},"Register"))))))))}}]),t}(r.a.Component),K=Object(g.g)(G),A=a(305),D=a(306),R=a(13),T=a(31),I=a.n(T),U=function(){if(!y.a.isLoggedIn())return!1;var e=y.a.getCurrentUser(),t=e.id,a=e.privKey,n=e.pubKey,r=R.a.getGtx().newTransaction([n]);return r.addOperation("look_for_game",t,I.a.randomBytes(32)),r.sign(a,n),r.postAndWaitConfirmation()},H=function(){if(!y.a.isLoggedIn())return!1;var e=y.a.getCurrentUser(),t=e.id,a=e.privKey,n=e.pubKey,r=R.a.getGtx().newTransaction([n]);return r.addOperation("stop_looking_for_game",t,I.a.randomBytes(32)),r.sign(a,n),r.postAndWaitConfirmation()},M=function(e){if(!y.a.isLoggedIn())return!1;var t=y.a.getCurrentUser(),a=t.id,n=t.privKey,r=t.pubKey,o=R.a.getGtx().newTransaction([r]);return o.addOperation("join_game",a,e,I.a.randomBytes(32)),o.sign(n,r),o.postAndWaitConfirmation()},B=function(e,t){var a=y.a.getCurrentUser(),n=a.id,r=a.privKey,o=a.pubKey,i=R.a.getGtx().newTransaction([o]);return i.addOperation("post_message",e,n,t,I.a.randomBytes(32)),i.sign(r,o),i.postAndWaitConfirmation()},W=function(e){var t=y.a.getCurrentUser(),a=t.id,n=t.privKey,r=t.pubKey,o=R.a.getGtx().newTransaction([r]);return o.addOperation("resign",e,a,I.a.randomBytes(32)),o.sign(n,r),o.postAndWaitConfirmation()},V=function(e){return R.a.getGtx().query("get_game_status",{game:e})},z=function(e,t){var a=y.a.getCurrentUser(),n=a.id,r=a.privKey,o=a.pubKey,i=R.a.getGtx().newTransaction([o]);return i.addOperation("pass_shuffled_deck",e,n,t),i.sign(r,o),i.postAndWaitConfirmation()},J=function(e,t,a){var n=y.a.getCurrentUser(),r=n.id,o=n.privKey,i=n.pubKey,s=R.a.getGtx().newTransaction([i]);return s.addOperation("place_bet",e,r,t,a),s.sign(o,i),s.postAndWaitConfirmation()},q=function(e){var t=y.a.getCurrentUser(),a=t.id,n=t.privKey,r=t.pubKey,o=R.a.getGtx().newTransaction([r]);return o.addOperation("player_hit",e,a,I.a.randomBytes(32)),o.sign(n,r),o.postAndWaitConfirmation()},Q=function(e){var t=y.a.getCurrentUser(),a=t.id,n=t.privKey,r=t.pubKey,o=R.a.getGtx().newTransaction([r]);return o.addOperation("player_stand",e,a,I.a.randomBytes(32)),o.sign(n,r),o.postAndWaitConfirmation()},$=function(e){return R.a.getGtx().query("get_card_fragments",{game:e})},Y=function(e,t){var a=y.a.getCurrentUser(),n=a.id,r=a.privKey,o=a.pubKey,i=R.a.getGtx().newTransaction([o]);return i.addOperation("post_card_fragments",e,n,t),i.sign(r,o),i.postAndWaitConfirmation()},X=function(e,t,a){var n=y.a.getCurrentUser(),r=n.id,o=n.privKey,i=n.pubKey,s=R.a.getGtx().newTransaction([i]);return s.addOperation("post_card_secret",e,r,t,a),s.sign(o,i),s.postAndWaitConfirmation()},Z=function(e,t,a){console.log("Posting cardReveal: ".concat(a));var n=y.a.getCurrentUser(),r=n.id,o=n.privKey,i=n.pubKey,s=R.a.getGtx().newTransaction([i]);return s.addOperation("post_card_reveal",e,r,t,a),s.sign(o,i),s.postAndWaitConfirmation()},ee=function(e){var t=y.a.getCurrentUser(),a=t.id,n=t.privKey,r=t.pubKey,o=R.a.getGtx().newTransaction([r]);return o.addOperation("ready_for_next_round",e,a,I.a.randomBytes(32)),o.sign(n,r),o.postAndWaitConfirmation()},te=function(e){return"".concat(e,"_PENDING")},ae=function(e){return"".concat(e,"_REJECTED")},ne=function(e){return"".concat(e,"_FULFILLED")};function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie="lobby/RESET",se="lobby/FETCH_STATUS",ce="lobby/LOOK_FOR_GAME",le="lobby/STOP_LOOKING_FOR_GAME",ue="lobby/JOIN_GAME",me={loading:!1,waitList:[],gameList:[],sending:!1,isLookingForGame:!1,error:null},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case te(se):return oe({},e,{loading:!0,error:null});case ne(se):var r=n.wait_list,o=n.game_list;return oe({},e,{loading:!1,waitList:r,gameList:o,isLookingForGame:e.sending?e.isLookingForGame:r.some((function(e){return e.id===y.a.getCurrentUser().id}))});case ae(se):return oe({},e,{loading:!1,error:n});case te(ce):return oe({},e,{sending:!0,isLookingForGame:!0,error:null});case te(le):return oe({},e,{sending:!0,isLookingForGame:!1,error:null});case ne(ce):case ne(le):return oe({},e,{sending:!1});case ae(ce):case ae(le):return oe({},e,{sending:!1,isLookingForGame:e.waitList.some((function(e){return e.id===y.a.getCurrentUser().id})),error:n});case te(ue):return oe({},e,{sending:!0,error:null});case ae(ue):return oe({},e,{sending:!1,error:n});case ie:return me;default:return e}},pe=a(61),ge=a.n(pe),fe=a(74),ye=a.n(fe),he=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={initialized:!1},a.logout=function(){y.a.logout(),a.props.history.push("/")},a.composeRedirectToGameHandler=function(e){return function(){return a.props.history.push("/game/".concat(e))}},a.findGame=function(){return a.props.lookForGame()},a.quitFindGame=function(){return a.props.stopLookingForGame()},a.composeJoinHandler=function(e){return function(){return a.props.joinGame(e)}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.reset(),this.getLobbyStatus=ye()(this.props.getLobbyStatus,1e3),this.getLobbyStatus()}},{key:"componentWillUnmount",value:function(){this.props.isLookingForGame&&this.props.stopLookingForGame()}},{key:"componentDidUpdate",value:function(e,t){e.loading&&!this.props.loading&&(this.state.initialized||this.setState({initialized:!0}),this.getLobbyStatus());var a=this.props,n=a.currentUser,r=a.gameList;if(e.gameList!==r){var o=r.find((function(e){return e.player_1===n.id||e.player_2===n.id}));o&&this.props.history.push("/game/".concat(o.id))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.waitList,n=t.gameList,o=t.currentUser,i=t.isLookingForGame,s=t.sending;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-end align-items-end py-4"},r.a.createElement("div",{className:"d-flex align-items-baseline"},r.a.createElement("div",null,"Welcome, ",o.username,"!"),r.a.createElement(_.a,{color:"outline-danger",className:"ml-3",onClick:this.logout},"Logout"))),r.a.createElement(O.a,null,this.state.initialized?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{lg:"6",className:"mb-3 mb-lg-0"},r.a.createElement(P.a,{style:{height:"100%"}},r.a.createElement(N.a,null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-baseline"},r.a.createElement("h4",null,"Wait List"),this.state.initialized&&(i?r.a.createElement(_.a,{color:"outline-danger",onClick:this.quitFindGame,disabled:s},"Stop Finding"):r.a.createElement(_.a,{color:"primary",onClick:this.findGame,disabled:s},"Find Game"))),r.a.createElement("hr",null),r.a.createElement(D.a,{responsive:!0,borderless:!0,striped:!0,hover:!0},r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,ge()(t.timestamp).fromNow()),r.a.createElement("td",{valign:"middle"},t.username),r.a.createElement("td",{className:"text-right"},t.id!==o.id&&r.a.createElement(_.a,{color:"outline-primary",onClick:e.composeJoinHandler(t.id)},"Join")," "))}))))))),r.a.createElement(x.a,{lg:"6"},r.a.createElement(P.a,{style:{height:"100%"}},r.a.createElement(N.a,null,r.a.createElement("h4",null,"Active Games"),r.a.createElement("hr",null),r.a.createElement(D.a,{responsive:!0,borderless:!0,striped:!0,hover:!0},r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,ge()(t.timestamp).fromNow()),r.a.createElement("td",null,t.player_1_name),r.a.createElement("td",{valign:"middle"},t.player_2_name),r.a.createElement("td",{className:"text-right"},t.player_1!==o.id&&t.player_2!==o.id?r.a.createElement(_.a,{color:"outline-primary",onClick:e.composeRedirectToGameHandler(t.id)},"Spectate"):r.a.createElement(_.a,{color:"primary",onClick:e.composeRedirectToGameHandler(t.id)},"Play")," "))})))))))):r.a.createElement(x.a,{md:{size:4,offset:4},className:"pt-5"},r.a.createElement(A.a,{animated:!0,value:100}))))}}]),t}(r.a.Component),be={reset:function(){return{type:ie}},getLobbyStatus:function(){return{type:se,payload:R.a.getGtx().query("get_lobby_status",{})}},lookForGame:function(){return{type:ce,payload:U()}},stopLookingForGame:function(){return{type:le,payload:H()}},joinGame:function(e){return{type:ue,payload:M(e)}}},ve=Object(g.g)(Object(d.b)((function(e){var t=e.lobby,a=t.loading,n=t.waitList,r=t.gameList,o=t.sending,i=t.isLookingForGame;return{loading:a,sending:o,waitList:n,gameList:r,isWaitingForGameStart:t.isWaitingForGameStart,isLookingForGame:i,error:t.error,currentUser:y.a.getCurrentUser()}}),be)(he)),Ee=a(37),Oe=(a(283),a(32));function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we="game/RESET",Ce="game/FETCH_STATUS",Se="game/FETCH_FRAGMENTS",ke="game/POST_MESSAGE",_e="game/PASS_SHUFFLED_DECK",Pe="game/PLACE_BET",Ne="game/READY_FOR_NEXT_ROUND",Fe="game/HIT",Le="game/STAND",Ge="game/RESIGN",Ke={PASS_SHUFFLED_DECK:"game/PASS_SHUFFLED_DECK",PLACE_BET:"game/PLACE_BET"},Ae=function(e){return y.a.getCurrentUser().id===e.player_1},De=function(e){return y.a.getCurrentUser().id===e.player_2},Re=function(e,t,a,n){t.pendingActions[Ke.PASS_SHUFFLED_DECK]||Object(L.isEmpty)(t.cardCodewords)||Te(e,a,n);var r=Object(Oe.d)();if(!Object(L.isEmpty)(r)){var o=!0,i=!1,s=void 0;try{for(var c,l=n.cards_in_player_hand[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,m=!0,d=!1,p=void 0;try{for(var g,f=u[Symbol.iterator]();!(m=(g=f.next()).done);m=!0){var y=g.value;if(y.is_open&&!n.deck[y.card_index].reveal_value&&(X(a,y.card_index,r.keyPairs[y.card_index].privateKey),!Object(L.isEmpty)(n.card_decrypts[1-t.myPlayerIndex][y.card_index].decrypt_key))){Object(Oe.i)(n.card_decrypts[1-t.myPlayerIndex]);try{var h=Object(Oe.b)(n.deck,y.card_index);Z(a,y.card_index,h)}catch(b){console.error(b)}}}}catch(v){d=!0,p=v}finally{try{m||null==f.return||f.return()}finally{if(d)throw p}}}}catch(v){i=!0,s=v}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}}},Te=function(){var e=Object(E.a)(v.a.mark((function e(t,a,n){var r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.game_state.phrase,o=n.deck,!(-4===r&&De(n.game)||-3===r&&Ae(n.game))){e.next=12;break}return e.prev=3,e.next=6,Ie(t,a,o,-4===r);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0),alert("An error occured, please refresh the page to try again.");case 12:if(!(-2===r&&De(n.game)||-1===r&&Ae(n.game))){e.next=22;break}return e.prev=13,e.next=16,Ue(t,a,n.deck);case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(13),console.error(e.t1),alert("An error occured, please refresh the page to try again.");case 22:case"end":return e.stop()}}),e,null,[[3,8],[13,18]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(E.a)(v.a.mark((function e(t,a,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(E.a)(v.a.mark((function e(o,i){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({type:_e,payload:z(a,r?Object(Oe.e)():Object(Oe.h)(n.map((function(e){return e.encrypted}))))});case 3:o(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),i();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(E.a)(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(E.a)(v.a.mark((function e(r,o){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({type:_e,payload:z(a,Object(Oe.c)(n.map((function(e){return e.encrypted}))))});case 3:r(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),o();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),He={myPlayerIndex:-1,loadingGameStatus:!1,loadingCardFragments:!1,messages:[],game:{},gameState:{},cardCodewords:[],deck:[],cardsInPlayerHand:[[],[],[]],handsValue:[0,0,0],playerBets:[],playerMonies:[],pendingMessages:[],fulfilledMessages:[],pendingActions:{},sending:!1,resigning:!1,isReadyForNextRound:!1,error:null},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload,r=t.meta;switch(a){case te(Ce):return je({},e,{loadingGameStatus:!0,error:null});case ne(Ce):var o=n.game,i=n.messages,s=n.game_state,c=n.deck,l=n.player_monies,u=n.player_bets,m=n.cards_in_player_hand,d=n.hands_value,p=m.map((function(e){return e.map((function(e){return je({},e,{revealValue:c[e.card_index].reveal_value})}))})),g=o.player_1===y.a.getCurrentUser().id?0:1,f=0!==s.phrase&&e.isReadyForNextRound;return je({},e,{myPlayerIndex:g,loadingGameStatus:!1,game:o,messages:i,gameState:s,deck:c,cardsInPlayerHand:p,handsValue:d,playerMonies:l,playerBets:u,fulfilledMessages:[],isReadyForNextRound:f});case ae(Ce):return je({},e,{loadingGameStatus:!1,error:n});case te(ke):return je({},e,{sending:!0,error:null,pendingMessages:[].concat(Object(Ee.a)(e.pendingMessages),[r.msg])});case ne(ke):return je({},e,{sending:!1,pendingMessages:e.pendingMessages.filter((function(e){return e.message!==r.msg.message})),fulfilledMessages:[].concat(Object(Ee.a)(e.fulfilledMessages),[r.msg])});case ae(ke):return je({},e,{sending:!1,pendingMessages:e.pendingMessages.filter((function(e){return e.message!==r.msg.message})),error:n});case te(Ge):return je({},e,{resigning:!0,error:null});case we:return He;case ae(Ge):return je({},e,{resigning:!1,error:n});case te(_e):return je({},e,{pendingActions:je({},e.pendingActions,Object(h.a)({},Ke.PASS_SHUFFLED_DECK,!0))});case ne(_e):return je({},e,{pendingActions:je({},e.pendingActions,Object(h.a)({},Ke.PASS_SHUFFLED_DECK,!1))});case te(Pe):return je({},e,{pendingActions:je({},e.pendingActions,Object(h.a)({},Ke.PLACE_BET,!0))});case ae(Pe):return je({},e,{pendingActions:je({},e.pendingActions,Object(h.a)({},Ke.PLACE_BET,!1))});case ne(Pe):return je({},e,{playerBets:[].concat(Object(Ee.a)(e.playerBets.filter((function(e){return e.id!==r.player}))),[{id:r.player,amount:r.amount}]),pendingActions:je({},e.pendingActions,Object(h.a)({},Ke.PLACE_BET,!1))});case te(Se):return je({},e,{loadingCardFragments:!0});case ne(Se):return Object(L.isEmpty)(n[0])||Object(L.isEmpty)(n[1])||!Object(L.isEmpty)(e.cardCodewords)?je({},e,{loadingCardFragments:!1}):je({},e,{loadingCardFragments:!1,cardCodewords:Object(Oe.a)(n[1-e.myPlayerIndex])});case ae(Se):return je({},e,{loadingCardFragments:!1});case te(Fe):case te(Le):return je({},e,{sending:!0});case ne(Fe):return je({},e,{sending:!1,cardsInPlayerHand:e.cardsInPlayerHand.map((function(t,a){return a!==e.myPlayerIndex+1||t.length===r.expectedHandSize?t:[].concat(Object(Ee.a)(t),[{card_index:e.gameState.top_card_index,revealValue:""}])}))});case ne(Le):return je({},e,{sending:!1,gameState:je({},e.gameState,{phrase:r.expectedPhrase})});case ae(Fe):case ae(Le):return je({},e,{sending:!1});case te(Ne):return je({},e,{isReadyForNextRound:!0});case ae(Ne):return je({},e,{isReadyForNextRound:!1});default:return e}},Be=a(165),We=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:Math.min(a.props.maxValue,10)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("span",{style:{minWidth:"3em"},className:"mr-3 text-right"},"$",this.state.value),r.a.createElement(Be.a,{axis:"x",x:this.state.value,onChange:function(t){var a=t.x;return e.setState({value:a})},xmax:this.props.maxValue,xmin:1,styles:{active:{backgroundColor:"#007bff"}}}),r.a.createElement(_.a,{color:"primary",disabled:this.props.disabled,className:"ml-3",onClick:function(){return e.props.onSubmit(e.state.value)}},"OK"))}}]),t}(r.a.PureComponent),Ve=a(309),ze=a(307),Je=a(308),qe=function(e){return r.a.createElement(Ve.a,{isOpen:e.isOpen,toggle:e.onClose},r.a.createElement(ze.a,{toggle:e.onClose},"Rules"),r.a.createElement(Je.a,null,"This game is basically Blackjack (21) with some small changes:",r.a.createElement("ul",null,r.a.createElement("li",null,"Use only a single 52 deck. No reshuffle."),r.a.createElement("li",null,"The goal is to have more money than your opponent at the end of the game."),r.a.createElement("li",null,"Game ends when the deck has run out of card:",r.a.createElement("ul",null,r.a.createElement("li",null,"At start of each round, if the deck has less than 6 cards, the game ends immediately."),r.a.createElement("li",null,"Otherwise, when the deck runs out of card, the current round is scored immediately, no one (not even dealer) can receive any more card."))),r.a.createElement("li",null,"Blackjack pays out 2:1, normal wins pay out 1:1."),r.a.createElement("li",null,"Currently you can only hit or stand, no double up or split yet (sorry!)"))))},Qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={message:"",showingRules:!1},a.toggleRules=function(){return a.setState({showingRules:!a.state.showingRules})},a.onMessageChanged=function(e){return a.setState({message:e.target.value})},a.postMessage=function(e){e.preventDefault(),a.props.postMessage(Number(a.props.match.params.gameId),a.state.message),a.setState({message:""})},a.leaveGame=function(){return a.props.history.push("/lobby")},a.confirmResign=function(){window.confirm("Are you sure you want to resign?")&&a.props.resign(Number(a.props.match.params.gameId))},a.placeBet=function(e){return a.props.placeBet(Number(a.props.match.params.gameId),a.props.gameState.round,e)},a.hit=function(){return a.props.hit(Number(a.props.match.params.gameId))},a.stand=function(){return a.props.stand(Number(a.props.match.params.gameId))},a.readyForNextRound=function(){return a.props.readyForNextRound(Number(a.props.match.params.gameId))},a.renderBettingPanel=function(e,t){var n=a.props.pendingActions[Ke.PLACE_BET]||!!t;return r.a.createElement(We,{onSubmit:a.placeBet,disabled:n,maxValue:Math.min(50,e)})},a.renderGameView=function(e){var t=a.props,n=t.cardsInPlayerHand,o=t.playerBets,i=t.playerMonies,s=t.game,c=t.gameState,l=t.handsValue,u=t.isReadyForNextRound,m=t.sending;return r.a.createElement("div",{className:"d-flex flex-column",style:{height:"100%"}},r.a.createElement("div",{id:"dealer-zone",className:"flex-grow-1 d-flex flex-column"},r.a.createElement("div",{className:"text-center pb-3"},"Deck: ",52-c.top_card_index," cards left"),r.a.createElement("div",{className:"d-flex flex-grow-1 flex-row-reverse justify-content-center align-items-start position-relative"},0===c.phrase?r.a.createElement("h3",{className:"d-flex align-items-center",style:{height:"100%"}},r.a.createElement("div",{className:"text-center"},"Round ",c.round,r.a.createElement("br",null),"Place your bet")):n[0].map((function(e,t){return r.a.createElement("img",{key:e.card_index,className:"game-card",style:{top:"".concat(30*t,"px"),marginRight:"".concat(0===t?0:-80,"px")},width:"100",alt:e.revealValue||"back",src:"".concat("/rell-game","/images/cards/").concat(e.revealValue||"back",".svg")})})),c.phrase>3&&r.a.createElement("div",{className:"text-success",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:700,fontSize:"3rem",textShadow:"0 0 3px rgba(0,0,0,0.8)"}},l[0]))),r.a.createElement("div",{id:"players-zone",className:"d-flex flex-grow-1"},Array.from({length:2}).map((function(e,t){return t+1})).map((function(t){var d=n[t],p=s["player_".concat(t)],g=s["player_".concat(t,"_name")],f=(o.find((function(e){return e.id===p}))||{}).amount,y=(i.find((function(e){return e.id===p}))||{}).amount,h=p===e.id,b=t===c.phrase,v=d.some((function(e){return""===e.revealValue}));return r.a.createElement("div",{key:t,className:"d-flex flex-column-reverse flex-grow-1 pb-5"},r.a.createElement("h4",{className:"text-center flex-0"},"".concat(g).concat(h?" (You)":""," - $").concat(y)),r.a.createElement("div",{className:"flex-0 d-flex justify-content-center align-items-center",style:{height:"3.5em"}},0===c.phrase&&h&&!f?a.renderBettingPanel(y,f):f?"Betting $".concat(f):" "),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"4.5em"}},h&&b&&!v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{color:"primary mx-1",onClick:a.hit,disabled:m},"Hit"),r.a.createElement(_.a,{color:"primary mx-1",onClick:a.stand,disabled:m},"Stand")),c.phrase>3&&h&&!u&&r.a.createElement(_.a,{className:"mx-1",color:"primary",onClick:a.readyForNextRound},"Next Round")),r.a.createElement("div",{className:"d-flex justify-content-center align-items-end position-relative"},d.map((function(e,t){return r.a.createElement("img",{key:e.card_index,className:"game-card",style:{bottom:"".concat(30*t,"px"),marginLeft:"".concat(0===t?0:-80,"px")},width:"100",alt:e.revealValue||"back",src:"".concat("/rell-game","/images/cards/").concat(e.revealValue||"back",".svg")})})),c.phrase>3&&r.a.createElement("div",{className:"text-success",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:700,fontSize:"3rem",textShadow:"0 0 3px rgba(0,0,0,0.8)"}},l[t])))}))))},a.renderLoader=function(e,t,a){return r.a.createElement("div",{className:"position-absolute d-flex flex-column justify-content-center align-items-center",style:{top:0,left:0,bottom:0,right:0}},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("h4",{className:"px-5"},-4===e?"".concat(a," is shuffling the deck very carefully..."):-3===e?"".concat(t," is shuffling the deck very carefully..."):-2===e?"Players are double-checking the deck...":"Game starting soon..."))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.reset();var t=Number(this.props.match.params.gameId);this.getGameStatus=ye()((function(){return e.props.getGameStatus(t)}),500),this.getGameStatus()}},{key:"componentDidUpdate",value:function(e,t){e.loadingGameStatus&&!this.props.loadingGameStatus&&(this.getGameStatus(),0===e.messages.length&&(this.refs.messages.scrollTop=this.refs.messages.scrollHeight),Object(L.isEmpty)(e.game)&&!Object(L.isEmpty)(this.props.game)&&(Ae(this.props.game)||De(this.props.game))&&this.props.getCardFragments(this.props.game.id)),e.loadingCardFragments&&!this.props.loadingCardFragments&&Object(L.isEmpty)(this.props.cardCodewords)&&this.props.getCardFragments(this.props.game.id)}},{key:"render",value:function(){var e=this.props,t=e.messages,a=e.fulfilledMessages,n=e.pendingMessages,o=e.game,i=e.gameState,s=e.resigning,c=[].concat(Object(Ee.a)(t),Object(Ee.a)(a),Object(Ee.a)(n)),l=y.a.getCurrentUser();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(x.a,{lg:"9",className:"py-3 position-relative",style:{height:"100vh"}},!Object(L.isEmpty)(o)&&r.a.createElement(r.a.Fragment,null,i.phrase<0&&this.renderLoader(i.phrase,o.player_1_name,o.player_2_name),i.phrase>=0&&this.renderGameView(l),-1!==o.finished&&r.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)"},className:"d-flex justify-content-center align-items-center"},r.a.createElement("div",null,"Game has ended. Winner: ",1===o.winner?o.player_1_name:o.player_2_name,"!")),r.a.createElement("div",{className:"position-absolute d-flex justify-content-between",style:{left:10,right:10,top:10}},r.a.createElement(_.a,{color:"outline-primary",onClick:this.toggleRules},"? Rules ?"),-1!==o.finished||o.player_1!==l.id&&o.player_2!==l.id?r.a.createElement(_.a,{color:"outline-secondary",onClick:this.leaveGame},"Leave Game"):r.a.createElement(_.a,{color:"outline-secondary",disabled:s,onClick:this.confirmResign},"Resign")))),r.a.createElement(x.a,{lg:"3",className:"d-flex flex-column justify-content-end py-3 col-lg-3",style:{maxHeight:"100vh",background:"rgba(0,0,0,0.2)"}},r.a.createElement("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",style:{overflow:"hidden"}},r.a.createElement("div",{style:{overflow:"auto"},ref:"messages"},c.length>0?c.map((function(e){return r.a.createElement("p",{style:{wordBreak:"break-word"},key:e.timestamp},r.a.createElement("b",{className:e.author_name===l.username?"text-primary":"text-secondary"},"[",ge()(e.timestamp).fromNow(),"] ",e.author_name),":",r.a.createElement("br",null),e.message)})):r.a.createElement("div",{className:"text-muted"},'Say something nice e.g. "Good game, have fun!"'))),r.a.createElement(j.a,{className:"flex-grow-0 mt-3",onSubmit:this.postMessage},r.a.createElement(S.a,{type:"text",autoComplete:"message",placeholder:"Chat...",value:this.state.message,onChange:this.onMessageChanged})))),r.a.createElement(qe,{isOpen:this.state.showingRules,onClose:this.toggleRules}))}}]),t}(r.a.Component),$e={getGameStatus:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a,n){var r,o,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({type:Ce,payload:V(e)});case 2:return r=t.sent,o=r.value,(Ae(o.game)||De(o.game))&&(i=n().game,Re(a,i,e,r.value)),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},postMessage:function(e,t){return{type:ke,payload:B(e,t),meta:{msg:{author_name:y.a.getCurrentUser().username,message:t,timestamp:(new Date).getTime()}}}},resign:function(e){return{type:Ge,payload:W(e)}},reset:function(){return{type:we}},placeBet:function(e,t,a){return{type:Pe,payload:J(e,t,a),meta:{player:y.a.getCurrentUser().id,amount:a}}},getCardFragments:function(e){return function(){var t=Object(E.a)(v.a.mark((function t(a,n){var r,o,i,s,c,l,u,m;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({type:Se,payload:$(e)});case 2:if(r=t.sent,o=r.value,i=n().game,s=y.a.getCurrentUser(),c=Object(Oe.d)(),Object(L.isEmpty)(c)&&(l=JSON.parse(localStorage.getItem("gameSecrets_".concat(s.id))||"{}"),u=!Object(L.isEmpty)(l)&&l.gameId===i.game.id,m=u?Object(Oe.f)(l.self,l.config):Object(Oe.g)(),c=m.self,u||localStorage.setItem("gameSecrets_".concat(s.id),JSON.stringify({self:m.self,config:m.config,gameId:i.game.id}))),Object(L.isEmpty)(o[i.myPlayerIndex]))try{Y(i.game.id,c.cardCodewordFragments)}catch(d){console.error(d),alert("An error occured, please refresh the page to try again.")}return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},hit:function(e){return function(t,a){var n=a().game,r=n.cardsInPlayerHand[n.myPlayerIndex+1].length+1;return t({type:Fe,payload:q(e),meta:{expectedHandSize:r}})}},stand:function(e){return function(t,a){return t({type:Le,payload:Q(e),meta:{expectedPhrase:a().game.phrase+1}})}},readyForNextRound:function(e){return{type:Ne,payload:ee(e)}}},Ye=Object(g.g)(Object(d.b)((function(e){var t=e.game,a=t.sending,n=t.loadingGameStatus,r=t.loadingCardFragments,o=t.cardCodewords,i=t.resigning,s=t.messages,c=t.pendingMessages,l=t.fulfilledMessages,u=t.game,m=t.gameState,d=t.pendingActions;return{sending:a,resigning:i,loadingGameStatus:n,loadingCardFragments:r,cardCodewords:o,game:u,gameState:m,playerBets:t.playerBets,playerMonies:t.playerMonies,messages:s,fulfilledMessages:l,pendingMessages:c,pendingActions:d,cardsInPlayerHand:t.cardsInPlayerHand,handsValue:t.handsValue,isReadyForNextRound:t.isReadyForNextRound}}),$e)(Qe));function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xe(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var et="config/SET_NODE_LOCATION",tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;Object(p.a)(t,["type","payload"]);switch(a){case et:return window.localStorage.setItem("nodeLocation",n),Ze({},e,{nodeLocation:n});default:return e}},at=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={location:"",loading:!1,success:!0},a.registerLocation=function(e){e.preventDefault(),a.state.location&&a.initializeNodeLocation()},a.onFieldChanged=function(e){return a.setState(Object(h.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("nodeLocation","");e&&this.setState({location:e},this.initializeNodeLocation)}},{key:"initializeNodeLocation",value:function(){var e=Object(E.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,success:!0}),e.next=3,R.a.init(this.state.location);case 3:if("pong"!==e.sent){e.next=11;break}return e.next=8,y.a.loginFromSession();case 8:this.props.setNodeLocation(this.state.location),e.next=12;break;case 11:this.setState({loading:!1,success:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.location;return r.a.createElement(O.a,{className:"justify-content-center align-items-center",style:{height:"100vh"}},r.a.createElement(x.a,{className:"m-auto",style:{paddingBottom:"20vh"},sm:"10",md:"6",lg:"5",xl:"4"},r.a.createElement(P.a,null,r.a.createElement(N.a,null,this.state.loading?r.a.createElement("div",null,"Testing connection, please wait..."):r.a.createElement(j.a,{onSubmit:this.registerLocation},r.a.createElement(w.a,null,!this.state.success&&r.a.createElement("div",{className:"color-danger"},"Cannot connect to server!"),r.a.createElement(F.a,null,"Please enter node location:"),r.a.createElement(S.a,{type:"text",name:"location",placeholder:"https://try.chromia.dev/node/#####/",value:e,onChange:this.onFieldChanged})),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(_.a,{color:"primary",type:"submit"},"Connect")))))))}}]),t}(r.a.Component),nt={setNodeLocation:function(e){return{type:et,payload:e}}},rt=Object(d.b)(null,nt)(at),ot=function(e){var t=e.component,a=Object(p.a)(e,["component"]);return r.a.createElement(g.b,Object.assign({},a,{render:function(){return y.a.isLoggedIn()?r.a.createElement(t,a):r.a.createElement(g.a,{to:"/"})}}))},it=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{basename:"rell-game"},this.props.nodeLocation?r.a.createElement(g.d,null,r.a.createElement(ot,{path:"/lobby",component:ve}),r.a.createElement(ot,{path:"/game/:gameId",component:Ye}),r.a.createElement(g.b,{path:"/"},r.a.createElement(K,null))):r.a.createElement(rt,null))}}]),t}(r.a.Component),st=Object(d.b)((function(e){return{nodeLocation:e.config.nodeLocation}}))(it),ct=a(162),lt=a(163),ut=a(164),mt=a(40),dt=Object(mt.combineReducers)({config:tt,lobby:de,game:Me}),pt=Object(mt.createStore)(dt,{},Object(ct.composeWithDevTools)(Object(mt.applyMiddleware)(lt.a,ut.a))),gt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(d.a,{store:pt},r.a.createElement(st,null)))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(gt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},32:function(e,t,a){"use strict";(function(e){a.d(t,"d",(function(){return m})),a.d(t,"g",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"i",(function(){return f})),a.d(t,"e",(function(){return y})),a.d(t,"h",(function(){return h})),a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return v}));var n,r,o,i,s=a(160),c=a(12),l=a(42),u=["1D","2D","3D","4D","5D","6D","7D","8D","9D","10D","JD","QD","KD","1H","2H","3H","4H","5H","6H","7H","8H","9H","10H","JH","QH","KH","1S","2S","3S","4S","5S","6S","7S","8S","9S","10S","JS","QS","KS","1C","2C","3C","4C","5C","6C","7C","8C","9C","10C","JC","QC","KC"],m=function(){return r},d=function(){n=Object(l.createConfig)(u.length);var e=Object(l.createPlayer)(n);return r={cardCodewordFragments:e.cardCodewordFragments.map((function(e){return e.toString("hex")})),keyPairs:e.keyPairs.map((function(e){return{privateKey:e.privateKey.toString("hex")}}))},o=null,i=[],{config:n,self:r}},p=function(e,t){return o=null,i=[],{config:n=t,self:r=e}},g=function(t){return Object(c.isEmpty)(r)?[]:(o={cardCodewordFragments:t,keyPairs:Array.from({length:53}).map((function(){return{}}))},i=Object(l.createDeck)([r,o].map((function(t){return t.cardCodewordFragments.map((function(t){return e.from(t,"hex")}))}))))},f=function(e){Object(c.isEmpty)(o)||(o.keyPairs=e.map((function(e){return{privateKey:e.decrypt_key}})))},y=function(){return h(i.map((function(e){return e.toString("hex")})))},h=function(t){return Object(l.encryptDeck)(Object(s.knuthShuffle)(t.map((function(t){return e.from(t,"hex")}))),e.from(r.keyPairs[n.cardCount].privateKey,"hex")).map((function(e){return e.toString("hex")}))},b=function(t){return Object(l.encryptDeck)(Object(l.decryptDeck)(t.map((function(t){return e.from(t,"hex")})),e.from(r.keyPairs[n.cardCount].privateKey,"hex")),r.keyPairs.map((function(t){return e.from(t.privateKey,"hex")}))).map((function(e){return e.toString("hex")}))},v=function(t,a){var n=t[a].encrypted,s=Object(l.decryptCard)(e.from(n,"hex"),[r,o].map((function(t){return e.from(t.keyPairs[a].privateKey,"hex")})));return u[i.findIndex((function(e){return e.equals(s)}))]}}).call(this,a(10).Buffer)},6:function(e,t,a){"use strict";(function(e){var n=a(18),r=a(9),o=a.n(r),i=a(15),s=a(52),c=a.n(s),l=a(13);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var m=function(){var t={},a=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=c.a.util.makeKeyPair(),n=a.pubKey,r=a.privKey,(i=l.a.getGtx().newTransaction([n])).addOperation("register",n,t),i.sign(r,n),e.next=8,i.postAndWaitConfirmation();case 8:return e.next=10,s(r.toString("hex"));case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=sessionStorage.getItem("userLogin"))){e.next=4;break}return e.next=4,m.login(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var a=Object(i.a)(o.a.mark((function a(n){var r,i,s,u,m,d;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e.from(n,"hex"),i=c.a.util.createPublicKey(r),s=i.toString("hex"),a.next=6,l.a.getGtx().query("get_user",{user_pubkey:s});case 6:return u=a.sent,m=u.id,d=u.username,t={id:m,username:d,pubKey:i,privKey:r},sessionStorage.setItem("userLogin",n),a.abrupt("return",{username:d,pubKey:s,privKey:n});case 14:return a.prev=14,a.t0=a.catch(0),console.error(a.t0),a.abrupt("return",{});case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}();return{register:a,login:s,loginFromSession:r,logout:function(){t={},sessionStorage.removeItem("userLogin")},isLoggedIn:function(){return!!t.privKey},getCurrentUser:function(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t)}}}();t.a=m}).call(this,a(10).Buffer)}},[[166,1,2]]]);
//# sourceMappingURL=main.ee24bd5d.chunk.js.map